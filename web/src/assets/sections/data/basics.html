<h1>Basics</h1>

<h2>DataClass and Entity</h2>
<ul>
    <li>A <strong>DataClass</strong> is a description of a business entity or concept needed in your application. This is the equivalent to <code>Table</code> for other database system.</li>
    <li>An <strong>Entity</strong> is an instance of a DataClass. This is the equivalent to a <code>Row</code> for a <code>Table</code></li>
</ul>

<h2>Creating your data model</h2>

<iframe width="560" height="315" src="https://www.youtube.com/embed/CWWfxuEFlwo" frameborder="0" allowfullscreen></iframe>

<p>
    <br>
    <img src="./assets/images/company_employee_model.png" alt="Company Employee Model" class="img-responsive">

<div class="bs-callout bs-callout-info">
    You can also create or update your model using the model API. More on the subject <a target="_blank" href="http://doc.wakanda.org/home2.en.html#/Model/Working-with-the-Model-API.200-995188.en.html">here</a>.
</div>
    

<div class="bs-callout bs-callout-info">
    Once you create and save your model using the model editor, the server automatically generates a REST API to do basic CRUD
    and even advanced operations (pagination, method calls..). <br> You can already start the server and switch to the
    <a [routerLink]="['/guide']" [queryParams]="{section: 'main-data-cs'}">client side</a> section to learn how to access data from the client side.
</div>





<h3>Relations</h3>
<p>
    In the <code>Employee</code> DataClass, <code>company</code> is a relation attribute of type <code>Company</code> representing
    that every employee in the app works for a specific company. The attribute <code>employees</code> in the <code>Company</code>    DataClass is a collection of <code>Employee</code> entities.


<h3>Attributes</h3>

An attribute is an object that stores information or represents a value in the datastore class. <br> Attributes are by default
<b>scalar</b> but you can choose to make an attribute <b>calculated</b> if you need its value to be calculated using code.

<h4>Scalar attributes types</h4>

<div id="attribute-types" class="collapse">
    <table class="table table-bordered table-hover">
    	<thead>
    		<tr>
    			<th>Data Type</th>
    			<th>Icon</th>
    			<th>Description</th>
    			<th>Value Range</th>
    		</tr>
    	</thead>
    	<tbody>
	        <tr>
	            <td>blob</td>
	            <td><img style="max-width:100%;" alt="" src="http://cdn.livedoc.wakanda.org/dynpict31346/picture/673298/pict673298.en.png"></td>
	            <td>A "binary large object" containing binary data.</td>
	            <td> </td>
	        </tr>
	        <tr>
	            <td>bool</td>
	            <td><img style="max-width:100%;" alt="" src="http://cdn.livedoc.wakanda.org/dynpict31346/picture/673301/pict673301.en.png"></td>
	            <td>A Boolean value: either true or false.</td>
	            <td> </td>
	        </tr>
	        <tr>
	            <td>byte</td>
	            <td><img style="max-width:100%;" alt="" src="http://cdn.livedoc.wakanda.org/dynpict31346/picture/673303/pict673303.en.png"></td>
	            <td>A sequence of 8 bits.</td>
	            <td> </td>
	        </tr>
	        <tr>
	            <td>date</td>
	            <td><img style="max-width:100%;" alt="" src="http://cdn.livedoc.wakanda.org/dynpict31346/picture/673305/pict673305.en.png"></td>
	            <td>If the <strong>Date only</strong> property is selected for this attribute type, the date value will include only
	                the "MM/DD/YYYY" format (e.g., "10/05/2010"). Otherwise, the date value including the time, stored in UTC.
	                The date is expressed in the following format: YYYY-MM-DDTHH:MM:ss.SSSZ (e.g., "2010-10-05T23:00:00.000Z"
	                for October 5, 2010 in the Central European Timezone). SSS, which represent the milliseconds, which can be
	                between 0 to 999, has been added to the date in the Dev Branch.</td>
	            <td> </td>
	        </tr>
	        <tr>
	            <td>duration</td>
	            <td><img style="max-width:100%;" alt="" src="http://cdn.livedoc.wakanda.org/dynpict31346/picture/673307/pict673307.en.png"></td>
	            <td>A duration between two dates</td>
	            <td> </td>
	        </tr>
	        <tr>
	            <td>image</td>
	            <td><img style="max-width:100%;" alt="" src="http://cdn.livedoc.wakanda.org/dynpict31346/picture/673309/pict673309.en.png"></td>
	            <td>A reference to an image file or an actual image.</td>
	            <td> </td>
	        </tr>
	        <tr>
	            <td>long</td>
	            <td><img style="max-width:100%;" alt="" src="http://cdn.livedoc.wakanda.org/dynpict31346/picture/673311/pict673311.en.png"></td>
	            <td>A whole number, greater than or equal to a standard number</td>
	            <td>-2,147,483,648 to 2,147,483,647</td>
	        </tr>
	        <tr>
	            <td>long64</td>
	            <td><img style="max-width:100%;" alt="" src="http://cdn.livedoc.wakanda.org/dynpict31346/picture/673313/pict673313.en.png"></td>
	            <td>A whole number, greater than or equal to a standard number</td>
	            <td>-9,223,372,036,854,775,808 to +9,223,372,036,854,775,807</td>
	        </tr>
	        <tr>
	            <td>number</td>
	            <td><img style="max-width:100%;" alt="" src="http://cdn.livedoc.wakanda.org/dynpict31346/picture/673315/pict673315.en.png"></td>
	            <td>A numeric value, corresponding either to a Real, and Integer or Long Integer.</td>
	            <td>±1.7e±308 (real), -32,768 to 32,767 (integer), -2^31 to (2^31)-1 (long)</td>
	        </tr>
	        <tr>
	            <td>string</td>
	            <td><img style="max-width:100%;" alt="" src="http://cdn.livedoc.wakanda.org/dynpict31346/picture/673317/pict673317.en.png"></td>
	            <td>A sequence of characters.</td>
	            <td> </td>
	        </tr>
	        <tr>
	            <td>uuid</td>
	            <td><img style="max-width:100%;" alt="" src="http://cdn.livedoc.wakanda.org/dynpict31346/picture/673319/pict673319.en.png"></td>
	            <td>Universally Unique Identifier: a 16 bytes (128 bits) number containing 32 hexadecimal characters</td>
	            <td> </td>
	        </tr>
	        <tr>
	            <td>word</td>
	            <td><img style="max-width:100%;" alt="" src="http://cdn.livedoc.wakanda.org/dynpict31346/picture/673321/pict673321.en.png"></td>
	            <td>A 16-bit signed integer</td>
	            <td>-32767 to 32768</td>
	        </tr>
        </tbody>
    </table>
</div>


<h4>Calculated attributes</h4>

<p>
    A calculated attribute is a named property with a data type that masks a calculation.
</p>

<ul>
    <li>It requires at least the <code>OnGet</code> method to be defined</li>
    <li>The value of the attribute is not stored</li>
    <li>If the attribute is not accessed the <code>OnGet</code> method will not be called</li>
    <li>Inside calculated attribute methods(OnGet, OnSet..) <code>this</code> represents the current entity</li>
    <li>If you don't define the <code>OnQuery</code> method and use the attribute in a query on large data, expect latency</li>
</ul>

<iframe width="560" height="315" src="https://www.youtube.com/embed/ZRP5PnKiU9g" frameborder="0" allowfullscreen></iframe>

<div class="bs-callout bs-callout-info">
    You can learn more about attributes by visiting the <a target="_blank" href="http://doc.wakanda.org/home2.en.htm#/Wakanda Studio/0.Beta/Wakanda-Server-Side-Concepts.100-715066.en.html">doc-center</a>.
</div>


<h3>Methods</h3>

<p>
    Datastore class methods allow you to execute code that can be applied to a DataClass, an entity collection, or an individual
    entity.
    <ul>
        <li>Inside a <code>collection</code> method <code>this</code> represents the collection who's method was called</li>
        <li>Inside an <code>entity</code> method <code>this</code> represents the current entity who's method was called</li>
    </ul>
<iframe width="560" height="315" src="https://www.youtube.com/embed/j4ErhAgTTiI" frameborder="0" allowfullscreen></iframe>

<h3>Events</h3>

<p>
    In addition to dataclass methods that are executed when called, Wakanda provides a series of events on both entities and
    attributes that can trigger specific code to execute. Not to be confused with the Get, Set, Sort, and Query
    methods of a calculated attributed, events are available on all attributes and datastore classes.
</p>

<div class="bs-callout bs-callout-info">
    For both dataclass and attribute events, <code>this</code> points to the entity.
</div>

<h4>DataClass Events</h4>

<p>
    Class events operate on whole entities and are triggered by particular conditions. The following are datastore class level
    events:

<p>

<div id="dataclass-events" class="collapse">
    <table class="table table-bordered table-hover">
        <thead>
            <tr>
                <th>Event</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><em>Init</em></td>
                <td>Executes when a new entity comes into being after all auto sequence values are assigned.</td>
            </tr>
            <tr>
                <td><em>Load</em></td>
                <td>Executes just after an entity is accessed from the datastore but before it is delivered to the calling routine.</td>
            </tr>
            <tr>
                <td><em>Validate</em></td>
                <td>Executes when an entity is saved but before the <em>Save</em> event and can fail the validation if needed.</td>
            </tr>
            <tr>
                <td><em>Save</em></td>
                <td>Executes before an entity is saved and can stop the save if needed.</td>
            </tr>
            <tr>
                <td><em>Remove</em></td>
                <td>Executes before an entity is deleted and can stop the deletion if needed.</td>
            </tr>
            <tr>
                <td><em>Restrict</em></td>
                <td>Executes when entities are accessed and returns an entity collection that represents all entities in the
                    dataclass
                </td>
            </tr>
        </tbody>
    </table>
</div>

<h4>Attribute Events</h4>

<div id="attribute-events" class="collapse">
    <table class="table table-bordered table-hover">
        <thead>
            <tr>
                <th>Event</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><em>Init</em></td>
                <td>Executes when a new entity comes into being but after the entity’s <em>Init</em> event.</td>
            </tr>
            <tr>
                <td><em>Load</em></td>
                <td>Executes the first time the attribute is accessed after the entity is loaded. If the attribute is not
                    accessed, this event is not executed.</td>
            </tr>
            <tr>
                <td><em>Set</em></td>
                <td>Executes after an attribute’s value is set. In server-side code, this executes when the value is set.
                    When an attribute is set in client-side code, this event executes when the entity is saved or the
                    method <em>serverRefresh</em> is called, but only for each attribute that was modified.</td>
            </tr>
            <tr>
                <td><em>Validate</em></td>
                <td>Executes just before the entity’s <em>Validate</em> event executes and can fail the validation if
                    needed.</td>
            </tr>
            <tr>
                <td><em>Save</em></td>
                <td>Executes just before the entity’s <em>Save</em> event executes and can stop the save if needed.</td>
            </tr>
            <tr>
                <td><em>Remove</em></td>
                <td>Executes just before the entity’s <em>Remove</em> event and can stop the deletion if needed.</td>
            </tr>
        </tbody>
    </table>
</div>
<style>

	/* Table CSS style*/
	.table { border-collapse: collapse; text-align: left; width: 100%; }
	.table { background: #fff; overflow: hidden; border: 1px solid #DBDBDB; border-radius: 3px; }
	.table td, .table th { padding: 3px 10px; }
	.table thead th {background-color:#DBDBDB; font-size: 15px; font-weight: bold; border-left: 1px solid #B0B0B0; }
	.table tbody td { border-left: 1px solid #B0B0B0;font-size: 12px;font-weight: normal; }
	.table tbody tr:nth-child(even) { background: #f3f3f3;}

    /* Icon when the collapsible content is shown */
    .btn:after {
        font-family: "Glyphicons Halflings";
        content: "\e114";
        float: right;
        margin-left: 15px;
    }
    /* Icon when the collapsible content is hidden */
    
    .btn.collapsed:after {
        content: "\e080";
    }
</style>
